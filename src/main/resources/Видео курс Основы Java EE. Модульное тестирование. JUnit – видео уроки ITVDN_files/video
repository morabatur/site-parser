function identifyActiveLesson(){var n=$(".video-lesson-item").find('a[href="'+location.pathname.toLowerCase()+'"]');n.length==0?$(".video-lesson-item").first().addClass("active-lsn").siblings().removeClass("active-lsn"):$(n).parent().addClass("active-lsn").siblings().removeClass("active-lsn")}function loadTiters(n){var t={lessonId:n};$.ajax({type:"POST",url:"/Video/LoadTiters",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),success:function(n){$(".loader.loader--style3").hide();$(".subtitles").html(n.result)}})}function getMaterials(n){var t={linkToMaterials:n},i=window.open("","_blank");$.ajax({type:"POST",url:"/Video/GetLinkToMaterials",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),success:function(n){n&&(i.location=n)}})}function goToPosition(n){settings!=undefined&&(settings.vimeoPlayerApi?settings.vimeoPlayerApi.currentTime(n*1):settings.flowPlayerApi&&settings.flowPlayerApi.seek(n))}function storageKeyForSavedPosition(){return"player-position-"+settings.lessonId}function savePlayerPosition(){if(typeof Storage!="undefined"&&settings!=undefined&&settings.vimeoPlayerApi){var n=Math.floor(settings.vimeoPlayerApi.currentTime()),t=storageKeyForSavedPosition();localStorage.setItem(t,n)}}function restorePlayerPosition(){if(typeof Storage!="undefined"&&settings!=undefined&&settings.vimeoPlayerApi&&!settings.positionRestored){settings.positionRestored=!0;var t=storageKeyForSavedPosition(),n=localStorage.getItem(t);n&&settings.vimeoPlayerApi.currentTime(Math.floor(n*1))}}function addToFavourites(n){var t={lessonId:n};return $.ajax({type:"POST",url:"/Video/AddToFavourites",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t)})}function removeFromFavourites(n){var t={lessonId:n};return $.ajax({type:"POST",url:"/Video/RemoveFromFavourites",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t)})}function addBookmarkBtnHandler(n){$(n.currentTarget).children("span").hasClass("itvdnicon-bookmark2")?addToFavourites($(n.currentTarget).data("lesson-id")).then(function(){$(n.currentTarget).children("span").removeClass("itvdnicon-bookmark2").addClass("itvdnicon-bookmark")}):removeFromFavourites($(n.currentTarget).data("lesson-id")).then(function(){$(n.currentTarget).children("span").removeClass("itvdnicon-bookmark").addClass("itvdnicon-bookmark2")})}function displayContentOnTogglesClick(n){var t=$(n.currentTarget).data("link");$(n.currentTarget).siblings().removeClass("active-toggle");$(n.currentTarget).addClass("active-toggle");$(".video-attributes-content").css({display:"none"});t=="description"||t=="subtitles"?$("."+t).css({display:"block"}):$("."+t).css({display:"flex"})}function displayContentOnSluiderMove(n){$(".attributes-toggles-items > div").css({display:"none"});$(".video-attributes-content").css({display:"none"});$(".attributes-toggles-items > div").eq(n).css({display:"flex"});n==0||n==1?$(".video-attributes-content").eq(n).css({display:"block"}):$(".video-attributes-content").eq(n).css({display:"flex"})}function createSliderIfMobile(){if(window.matchMedia("(max-width: 768px)").matches){$(".attributes-toggles-items>div").off("click");var n=0;$(".lesson-attributes-slider-btn").eq(0).on("click",function(){n<=0?n=3:n--;displayContentOnSluiderMove(n)});$(".lesson-attributes-slider-btn").eq(1).on("click",function(){n==3?n=0:n++;displayContentOnSluiderMove(n)});$(".attributes-toggles-items>div").on("swipeleft swiperight",function(n){n.preventDefault();n.stopPropagation();n.type=="swipeleft"?$(".lesson-attributes-slider-btn").eq(1).trigger("click"):$(".lesson-attributes-slider-btn").eq(0).trigger("click")})}}function initializeRecommendedLinksSlider(){$(".recommended-links-content").slick({dots:!0,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1150,settings:{slidesToShow:3,slidesToScroll:3,infinite:!1,dots:!0}},{breakpoint:800,settings:{slidesToShow:2,slidesToScroll:2,infinite:!1,dots:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,infinite:!1,dots:!0}}]})}function goToQueryPosition(){var t=getQueryStringParams(),n=t.position;n&&n>=0&&settings!=undefined&&(settings.positionRestored=!0,goToPosition(n))}$(document).ready(function(){identifyActiveLesson();$(".video-lessons-list-content").mCustomScrollbar({theme:"dark-thick",scrollInertia:200}).mCustomScrollbar("scrollTo",$(".video-lessons-list-content .video-lesson-item").filter(".active-lsn"));$(".attributes-toggles-items>div").on("click",displayContentOnTogglesClick);$(document).on("click",".video-lesson-item",function(n){var t=$(n.currentTarget).children("a").attr("href");localStorage.setItem("aciveLink",t)});createSliderIfMobile();$(".video-breakpoints-item:not(.disabled)").on("click",function(n){var t=$(n.currentTarget).data("seconds");goToPosition(t)});$(".add-bookmark-btn:not(.disabled)").on("click",addBookmarkBtnHandler);$(".btn-show-more").on("click",function(){$(".catalog-cell:not(:first-child)").slideDown()});$(".get-materials").on("click",function(n){n.preventDefault();var t=$(n.currentTarget).data("link");getMaterials(t)});initializeRecommendedLinksSlider();$(window).on("load",goToQueryPosition)}),function(){function t(n){return $.ajax({url:n})}var n=null;$(document).ready(function(){var r=$("#lesson-content-info-container .loader-wrap"),u=$("#video-lessons-title").data("lesson-content-url"),i=$("#lesson-content-info-container").dialog({maxHeight:550,width:600,modal:!1,autoOpen:!1,dialogClass:"no-title-dialog",title:"Содержание курса",buttons:[{text:"Закрыть",click:function(){$(this).dialog("close")}}]});$("#video-lessons-title").on("click",function(){i.dialog("open");n||t(u).done(function(t){n=t;r.hide();i.append(t)})})})}()